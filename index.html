<!-- <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ¸…ç¾æ™¯èƒŒæ™¯ä¸åœ†è§’çŸ©å½¢å¼¹çª—</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: -1;
        }
        .window {
            position: absolute;
            border-radius: 10px;
            background: #ffffff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 12px;
            width: 160px;
            height: 80px;
            cursor: move;
            overflow: hidden;
            z-index: 10;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        .window:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .window-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            padding-bottom: 4px;
            border-bottom: 1px solid #eee;
            font-size: 12px;
        }
        .window-title {
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #333;
        }
        .window-close {
            cursor: pointer;
            width: 18px;
            height: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            background-color: #ff6b6b;
            color: white;
            font-size: 10px;
            transition: all 0.2s ease;
        }
        .window-close:hover {
            background-color: #ff5252;
        }
        .window-content {
            flex: 1;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #555;
        }
        .add-window {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ff69b4;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            font-size: 24px;
            z-index: 100;
            transition: all 0.3s ease;
        }
        .add-window:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }
        .customize-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            width: 300px;
            border: 1px solid #ddd;
        }
        .modal-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: inherit;
        }
        .form-group textarea {
            height: 80px;
        }
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        .modal-buttons button {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-confirm {
            background: #ff69b4;
            color: white;
        }
        .btn-cancel {
            background: #ccc;
            color: #333;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9998;
            display: none;
        }
    </style>
</head>
<body>
    <div class="background" id="background"></div>

    <div class="add-window" id="addWindow">+</div>

    <div class="overlay" id="overlay"></div>
    <div class="customize-modal" id="customizeModal" style="display: none;">
        <div class="modal-title">è‡ªå®šä¹‰å°çª—å£</div>
        <div class="form-group">
            <label for="windowTitle">æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</label>
            <input type="text" id="windowTitle" placeholder="è¾“å…¥æ ‡é¢˜">
        </div>
        <div class="form-group">
            <label for="windowContent">å†…å®¹</label>
            <textarea id="windowContent" placeholder="è¾“å…¥è¦æ˜¾ç¤ºçš„å†…å®¹" required></textarea>
        </div>
        <div class="modal-buttons">
            <button class="btn-cancel" id="cancelBtn">å–æ¶ˆ</button>
            <button class="btn-confirm" id="confirmBtn">ç¡®è®¤æ·»åŠ </button>
        </div>
    </div>

    <script>
        let windows = [];
        let currentDraggingWindow = null;
        let offsetX, offsetY;

        // é«˜æ¸…ç¾æ™¯å›¾æ•°ç»„ï¼ˆä½¿ç”¨Unsplash Sourceçš„é«˜è´¨é‡å›¾ç‰‡ï¼‰
        const highDefinitionImages = [
            'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1469474968028-56623f02e42e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1433086966358-54859d0ed716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1418065460487-3e41a0c92f6d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1426604966848-d7adac402bff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1432134584233-633a3a160a0f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1418479631204-4b5a3ca5e1ee?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1427445107805-8f1f0b5e4e6b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80'
        ];

        // è®¾ç½®éšæœºèƒŒæ™¯å›¾
        function setRandomBackground() {
            const randomIndex = Math.floor(Math.random() * highDefinitionImages.length);
            const backgroundEl = document.getElementById('background');
            backgroundEl.style.backgroundImage = `url('${highDefinitionImages[randomIndex]}')`;
        }

        // éšæœºä½ç½®ç”Ÿæˆ
        function getRandomPosition() {
            const windowWidth = 160;
            const windowHeight = 80;
            const maxX = window.innerWidth - windowWidth;
            const maxY = window.innerHeight - windowHeight;
            
            return {
                left: Math.random() * maxX,
                top: Math.random() * maxY
            };
        }

        // å¸¦ä¸“å±æ–‡æ¡ˆçš„å†…å®¹åº“
        const randomContents = [
            "äº²çˆ±çš„å°æ±ª~ è®°å¾—å¤šå–æ°´",
            "äº²çˆ±çš„å°æ±ª~ ä¼‘æ¯ä¸€ä¸‹å§",
            "äº²çˆ±çš„å°æ±ª~ ä»Šå¤©ä¹Ÿè¦åŠ æ²¹",
            "äº²çˆ±çš„å°æ±ª~ ä¿æŒå¾®ç¬‘ğŸ˜Š",
            "äº²çˆ±çš„å°æ±ª~ é£æ™¯çœŸå¥½å‘€",
            "äº²çˆ±çš„å°æ±ª~ æ·±å‘¼å¸æ”¾æ¾",
            "äº²çˆ±çš„å°æ±ª~ å¿«å®Œæˆå•¦",
            "äº²çˆ±çš„å°æ±ª~ å¥–åŠ±é¢—ç³–ğŸ¬",
            "äº²çˆ±çš„å°æ±ª~ çœ‹çœ‹å¤©ç©º",
            "äº²çˆ±çš„å°æ±ª~ ä½ è¶…æ£’çš„"
        ];
        const randomTitles = [
            "ç»™å°æ±ª",
            "ä¸“å±æç¤º",
            "çˆ±å¿ƒç•™è¨€",
            "å°æ±ªä¸“å±"
        ];

        // DOMå…ƒç´ è·å–
        const addWindowBtn = document.getElementById('addWindow');
        const customizeModal = document.getElementById('customizeModal');
        const overlay = document.getElementById('overlay');
        const confirmBtn = document.getElementById('confirmBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const windowTitleInput = document.getElementById('windowTitle');
        const windowContentInput = document.getElementById('windowContent');

        // âœ… æ–°å¢ï¼šåˆ›å»ºå›ºå®šå¼¹çª—ï¼ˆä¸è‡ªåŠ¨æ¶ˆå¤±ï¼‰
        function createFixedWindow(title, content, position) {
            const windowEl = document.createElement('div');
            windowEl.className = 'window';
            windowEl.style.left = `${position.left}px`;
            windowEl.style.top = `${position.top}px`;
            windowEl.style.background = '#e0f7fa'; // æµ…è“èƒŒæ™¯ï¼Œä¾¿äºåŒºåˆ†

            windowEl.innerHTML = `
                <div class="window-header">
                    <div class="window-title">${title}</div>
                    <div class="window-close">Ã—</div>
                </div>
                <div class="window-content">${content}</div>
            `;

            document.body.appendChild(windowEl);

            // å…³é—­åŠŸèƒ½ï¼ˆä½†ä¸è‡ªåŠ¨æ¶ˆå¤±ï¼‰
            windowEl.querySelector('.window-close').addEventListener('click', function() {
                windowEl.style.transition = 'all 0.3s ease';
                windowEl.style.transform = 'scale(0)';
                windowEl.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(windowEl)) {
                        windowEl.remove();
                    }
                }, 300);
            });

            // å…è®¸æ‹–æ‹½
            windowEl.querySelector('.window-header').addEventListener('mousedown', function(e) {
                currentDraggingWindow = windowEl;
                offsetX = e.clientX - windowEl.offsetLeft;
                offsetY = e.clientY - windowEl.offsetTop;
                e.preventDefault();
            });
        }

        // âœ… æ–°å¢ï¼šè·å–æ­¦æ±‰å¤©æ°”
        async function fetchWuhanWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=30.5928&longitude=114.3055&current_weather=true&timezone=Asia/Shanghai');
                const data = await res.json();
                if (data.current_weather) {
                    const temp = data.current_weather.temperature.toFixed(1);
                    // ç®€å•å¤©æ°”ä»£ç æ˜ å°„ï¼ˆå¯æ‰©å±•ï¼‰
                    const weatherMap = {
                        0: 'æ™´',
                        1: 'å¤šäº‘',
                        2: 'éƒ¨åˆ†å¤šäº‘',
                        3: 'é˜´',
                        45: 'é›¾',
                        48: 'å†»é›¾',
                        51: 'å°é›¨',
                        53: 'ä¸­é›¨',
                        55: 'å¤§é›¨',
                        61: 'å°é›¨',
                        63: 'ä¸­é›¨',
                        65: 'å¤§é›¨',
                        71: 'å°é›ª',
                        73: 'ä¸­é›ª',
                        75: 'å¤§é›ª'
                    };
                    const desc = weatherMap[data.current_weather.weathercode] || 'æœªçŸ¥';
                    return `æ­¦æ±‰ï¼š${temp}Â°Cï¼Œ${desc}`;
                } else {
                    return "æ­¦æ±‰å¤©æ°”ï¼šè·å–å¤±è´¥";
                }
            } catch (e) {
                console.error("å¤©æ°”APIé”™è¯¯:", e);
                return "æ­¦æ±‰å¤©æ°”ï¼šç½‘ç»œé”™è¯¯";
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè®¾ç½®èƒŒæ™¯å¹¶å¼€å§‹ç”Ÿæˆå¼¹çª—
        window.onload = async function() {
            setRandomBackground();

            // âœ… æ·»åŠ å›ºå®šæ—¥æœŸå¼¹çª—ï¼ˆå·¦ä¸Šè§’ï¼‰
            const today = new Date().toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            createFixedWindow("ğŸ“… ä»Šæ—¥æ—¥æœŸ", `ä»Šå¤©æ˜¯ ${today}`, { left: 20, top: 20 });

            // âœ… æ·»åŠ å›ºå®šæ­¦æ±‰å¤©æ°”å¼¹çª—ï¼ˆå·¦ä¸Šè§’ä¸‹æ–¹ï¼‰
            const weatherInfo = await fetchWuhanWeather();
            createFixedWindow("ğŸŒ¦ï¸ æ­¦æ±‰å¤©æ°”", weatherInfo, { left: 20, top: 120 });

            // åˆå§‹åŒ–5ä¸ªç¤ºä¾‹å¼¹çª—ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
            for(let i=0; i<5; i++){
                setTimeout(() => {
                    const pos = getRandomPosition();
                    createWindow(randomTitles[0], randomContents[i % randomContents.length], pos);
                }, i * 200);
            }

            // å¯åŠ¨å¿«é€Ÿè‡ªåŠ¨ç”Ÿæˆï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
            startFastAutoWindows();
        };

        // æ‰‹åŠ¨æ·»åŠ å¼¹çª—æŒ‰é’®ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
        addWindowBtn.addEventListener('click', () => {
            customizeModal.style.display = 'block';
            overlay.style.display = 'block';
        });

        cancelBtn.addEventListener('click', () => {
            customizeModal.style.display = 'none';
            overlay.style.display = 'none';
            windowTitleInput.value = '';
            windowContentInput.value = '';
        });

        confirmBtn.addEventListener('click', () => {
            const title = windowTitleInput.value.trim() || randomTitles[Math.floor(Math.random()*randomTitles.length)];
            const content = `äº²çˆ±çš„å°æ±ª~ ${windowContentInput.value.trim()}`;
            if (!windowContentInput.value.trim()) return;
            const pos = getRandomPosition();
            createWindow(title, content, pos);
            customizeModal.style.display = 'none';
            overlay.style.display = 'none';
            windowTitleInput.value = '';
            windowContentInput.value = '';
        });

        // åˆ›å»ºå¼¹çª—æ ¸å¿ƒå‡½æ•°ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
        function createWindow(title, content, position) {
            const windowEl = document.createElement('div');
            windowEl.className = 'window';
            
            const pos = position || getRandomPosition();
            windowEl.style.left = `${pos.left}px`;
            windowEl.style.top = `${pos.top}px`;
            
            const hue = Math.floor(Math.random() * 360);
            windowEl.style.background = `hsl(${hue}, 70%, 95%)`;

            windowEl.innerHTML = `
                <div class="window-header">
                    <div class="window-title">${title}</div>
                    <div class="window-close">Ã—</div>
                </div>
                <div class="window-content">${content}</div>
            `;

            document.body.appendChild(windowEl);
            windows.push(windowEl);

            windowEl.querySelector('.window-close').addEventListener('click', function() {
                windowEl.style.transition = 'all 0.3s ease';
                windowEl.style.transform = 'scale(0)';
                windowEl.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(windowEl)) {
                        windowEl.remove();
                        const index = windows.indexOf(windowEl);
                        if (index > -1) windows.splice(index, 1);
                    }
                }, 300);
            });

            windowEl.querySelector('.window-header').addEventListener('mousedown', function(e) {
                currentDraggingWindow = windowEl;
                offsetX = e.clientX - windowEl.offsetLeft;
                offsetY = e.clientY - windowEl.offsetTop;
                e.preventDefault();
            });

            // âš ï¸ è‡ªåŠ¨æ¶ˆå¤±ï¼ˆä»…å¯¹æ™®é€šå¼¹çª—ç”Ÿæ•ˆï¼Œå›ºå®šå¼¹çª—ä¸å—å½±å“ï¼‰
            const disappearTime = Math.random() * 1000 + 1000;
            setTimeout(() => {
                if (document.body.contains(windowEl)) {
                    windowEl.style.transition = 'all 0.5s ease';
                    windowEl.style.transform = 'scale(0.8)';
                    windowEl.style.opacity = '0';
                    setTimeout(() => {
                        if (document.body.contains(windowEl)) {
                            windowEl.remove();
                            const index = windows.indexOf(windowEl);
                            if (index > -1) windows.splice(index, 1);
                        }
                    }, 500);
                }
            }, disappearTime);
        }

        // æ‹–æ‹½äº‹ä»¶ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
        document.addEventListener('mousemove', function(e) {
            if (currentDraggingWindow) {
                const maxX = window.innerWidth - currentDraggingWindow.offsetWidth;
                const maxY = window.innerHeight - currentDraggingWindow.offsetHeight;
                
                let newLeft = e.clientX - offsetX;
                let newTop = e.clientY - offsetY;
                
                newLeft = Math.max(0, Math.min(newLeft, maxX));
                newTop = Math.max(0, Math.min(newTop, maxY));
                
                currentDraggingWindow.style.left = `${newLeft}px`;
                currentDraggingWindow.style.top = `${newTop}px`;
            }
        });

        document.addEventListener('mouseup', function() {
            currentDraggingWindow = null;
        });

        // å¿«é€Ÿè‡ªåŠ¨ç”Ÿæˆå¼¹çª—ï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰
        function startFastAutoWindows() {
            function generateBatch() {
                const count = Math.floor(Math.random() * 3) + 3;
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        const randomTitle = randomTitles[Math.floor(Math.random() * randomTitles.length)];
                        const randomContent = randomContents[Math.floor(Math.random() * randomContents.length)];
                        createWindow(randomTitle, randomContent);
                    }, i * 100);
                }
                const nextDelay = Math.random() * 700 + 800;
                setTimeout(generateBatch, nextDelay);
            }
            generateBatch();
        }
    </script>
</body>
</html>

 -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ¸…ç¾æ™¯èƒŒæ™¯ä¸åœ†è§’çŸ©å½¢å¼¹çª—</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: -1;
        }
        .window {
            position: absolute;
            border-radius: 10px;
            background: #ffffff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 12px;
            width: 160px;
            height: 80px;
            cursor: move;
            overflow: hidden;
            z-index: 10;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        .window:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .window-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            padding-bottom: 4px;
            border-bottom: 1px solid #eee;
            font-size: 12px;
        }
        .window-title {
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #333;
        }
        .window-close {
            cursor: pointer;
            width: 18px;
            height: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            background-color: #ff6b6b;
            color: white;
            font-size: 10px;
            transition: all 0.2s ease;
        }
        .window-close:hover {
            background-color: #ff5252;
        }
        .window-content {
            flex: 1;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #555;
        }
        .add-window {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ff69b4;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            font-size: 24px;
            z-index: 100;
            transition: all 0.3s ease;
        }
        .add-window:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }
        .customize-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            width: 300px;
            border: 1px solid #ddd;
        }
        .modal-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: inherit;
        }
        .form-group textarea {
            height: 80px;
        }
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        .modal-buttons button {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-confirm {
            background: #ff69b4;
            color: white;
        }
        .btn-cancel {
            background: #ccc;
            color: #333;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9998;
            display: none;
        }
    </style>
</head>
<body>
    <div class="background" id="background"></div>

    <div class="add-window" id="addWindow">+</div>

    <div class="overlay" id="overlay"></div>
    <div class="customize-modal" id="customizeModal" style="display: none;">
        <div class="modal-title">è‡ªå®šä¹‰å°çª—å£</div>
        <div class="form-group">
            <label for="windowTitle">æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰</label>
            <input type="text" id="windowTitle" placeholder="è¾“å…¥æ ‡é¢˜">
        </div>
        <div class="form-group">
            <label for="windowContent">å†…å®¹</label>
            <textarea id="windowContent" placeholder="è¾“å…¥è¦æ˜¾ç¤ºçš„å†…å®¹" required></textarea>
        </div>
        <div class="modal-buttons">
            <button class="btn-cancel" id="cancelBtn">å–æ¶ˆ</button>
            <button class="btn-confirm" id="confirmBtn">ç¡®è®¤æ·»åŠ </button>
        </div>
    </div>

    <script>
        let windows = [];
        let currentDraggingWindow = null;
        let offsetX, offsetY;

        // é«˜æ¸…ç¾æ™¯å›¾æ•°ç»„
        const highDefinitionImages = [
            'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1469474968028-56623f02e42e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1433086966358-54859d0ed716?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1418065460487-3e41a0c92f6d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1426604966848-d7adac402bff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1432134584233-633a3a160a0f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1418479631204-4b5a3ca5e1ee?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1470240731273-7821a6eeb6bd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1427445107805-8f1f0b5e4e6b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',
            'https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80'
        ];

        // è®¾ç½®éšæœºèƒŒæ™¯å›¾
        function setRandomBackground() {
            const randomIndex = Math.floor(Math.random() * highDefinitionImages.length);
            const backgroundEl = document.getElementById('background');
            backgroundEl.style.backgroundImage = `url('${highDefinitionImages[randomIndex]}')`;
        }

        // éšæœºä½ç½®ç”Ÿæˆï¼ˆç¡®ä¿ä¸è¶…å‡ºè§†å£ï¼‰
        function getRandomPosition() {
            const windowWidth = 160;
            const windowHeight = 80;
            const maxX = window.innerWidth - windowWidth;
            const maxY = window.innerHeight - windowHeight;
            return {
                left: Math.max(0, Math.random() * maxX),
                top: Math.max(0, Math.random() * maxY)
            };
        }

        // ä¸“å±æ–‡æ¡ˆåº“
        const randomContents = [
            "äº²çˆ±çš„å°æ±ª~ è®°å¾—å¤šå–æ°´",
            "äº²çˆ±çš„å°æ±ª~ ä¼‘æ¯ä¸€ä¸‹å§",
            "äº²çˆ±çš„å°æ±ª~ ä»Šå¤©ä¹Ÿè¦åŠ æ²¹",
            "äº²çˆ±çš„å°æ±ª~ ä¿æŒå¾®ç¬‘ğŸ˜Š",
            "äº²çˆ±çš„å°æ±ª~ é£æ™¯çœŸå¥½å‘€",
            "äº²çˆ±çš„å°æ±ª~ æ·±å‘¼å¸æ”¾æ¾",
            "äº²çˆ±çš„å°æ±ª~ åŠ æ²¹åŠ æ²¹ï¼",
            "äº²çˆ±çš„å°æ±ª~ å¥–åŠ±é¢—ç³–ğŸ¬",
            "äº²çˆ±çš„å°æ±ª~ çœ‹çœ‹å¤©ç©º",
            "äº²çˆ±çš„å°æ±ª~ ä½ è¶…æ£’çš„",
            "äº²çˆ±çš„å°æ±ª~ ä»Šå¤©å¤©æ°”çœŸå¥½å‘€",
            "äº²çˆ±çš„å°æ±ª~ é¡ºé¡ºåˆ©åˆ©ï¼"
        ];
        const randomTitles = [
            "ç»™å°æ±ª",
            "ä¸“å±æç¤º",
            "çˆ±å¿ƒç•™è¨€",
            "å°æ±ªä¸“å±"
        ];

        // DOMå…ƒç´ è·å–
        const addWindowBtn = document.getElementById('addWindow');
        const customizeModal = document.getElementById('customizeModal');
        const overlay = document.getElementById('overlay');
        const confirmBtn = document.getElementById('confirmBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const windowTitleInput = document.getElementById('windowTitle');
        const windowContentInput = document.getElementById('windowContent');

        // åˆ›å»ºå›ºå®šå¼¹çª—ï¼ˆä¸è‡ªåŠ¨æ¶ˆå¤±ï¼‰
        function createFixedWindow(title, content, position) {
            const windowEl = document.createElement('div');
            windowEl.className = 'window';
            windowEl.style.left = `${position.left}px`;
            windowEl.style.top = `${position.top}px`;
            windowEl.style.background = '#e0f7fa';
            windowEl.style.zIndex = '20'; // ç½®äºæ™®é€šå¼¹çª—ä¹‹ä¸Š

            windowEl.innerHTML = `
                <div class="window-header">
                    <div class="window-title">${title}</div>
                    <div class="window-close">Ã—</div>
                </div>
                <div class="window-content">${content}</div>
            `;

            document.body.appendChild(windowEl);

            // å…³é—­åŠŸèƒ½
            windowEl.querySelector('.window-close').addEventListener('click', function() {
                windowEl.style.transition = 'all 0.3s ease';
                windowEl.style.transform = 'scale(0)';
                windowEl.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(windowEl)) {
                        windowEl.remove();
                    }
                }, 300);
            });

            // æ‹–æ‹½æ”¯æŒ
            windowEl.querySelector('.window-header').addEventListener('mousedown', function(e) {
                currentDraggingWindow = windowEl;
                offsetX = e.clientX - windowEl.offsetLeft;
                offsetY = e.clientY - windowEl.offsetTop;
                e.preventDefault();
            });
        }

        // è·å–æ­¦æ±‰å¤©æ°”
        async function fetchWuhanWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=30.5928&longitude=114.3055&current_weather=true&timezone=Asia/Shanghai');
                const data = await res.json();
                if (data.current_weather) {
                    const temp = data.current_weather.temperature.toFixed(1);
                    const weatherMap = {
                        0: 'æ™´', 1: 'å¤šäº‘', 2: 'éƒ¨åˆ†å¤šäº‘', 3: 'é˜´',
                        45: 'é›¾', 48: 'å†»é›¾',
                        51: 'å°é›¨', 53: 'ä¸­é›¨', 55: 'å¤§é›¨',
                        61: 'å°é›¨', 63: 'ä¸­é›¨', 65: 'å¤§é›¨',
                        71: 'å°é›ª', 73: 'ä¸­é›ª', 75: 'å¤§é›ª'
                    };
                    const desc = weatherMap[data.current_weather.weathercode] || 'æœªçŸ¥';
                    return `æ­¦æ±‰ï¼š${temp}Â°Cï¼Œ${desc}`;
                } else {
                    return "æ­¦æ±‰å¤©æ°”ï¼šè·å–å¤±è´¥";
                }
            } catch (e) {
                console.error("å¤©æ°”APIé”™è¯¯:", e);
                return "æ­¦æ±‰å¤©æ°”ï¼šç½‘ç»œé”™è¯¯";
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè®¾ç½®èƒŒæ™¯å¹¶åˆ›å»ºå¼¹çª—
        window.onload = async function() {
            setRandomBackground();

            // âœ… éšæœºä½ç½®åˆ›å»ºâ€œä»Šæ—¥æ—¥æœŸâ€å¼¹çª—
            const today = new Date().toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            const datePos = getRandomPosition();
            createFixedWindow("ğŸ“… ä»Šæ—¥æ—¥æœŸ", `ä»Šå¤©æ˜¯ ${today}`, datePos);

            // âœ… éšæœºä½ç½®åˆ›å»ºâ€œæ­¦æ±‰å¤©æ°”â€å¼¹çª—
            const weatherInfo = await fetchWuhanWeather();
            const weatherPos = getRandomPosition();
            createFixedWindow("ğŸŒ¦ï¸ æ­¦æ±‰å¤©æ°”", weatherInfo, weatherPos);

            // åˆå§‹åŒ–5ä¸ªç¤ºä¾‹å¼¹çª—
            for(let i = 0; i < 5; i++){
                setTimeout(() => {
                    const pos = getRandomPosition();
                    createWindow(randomTitles[0], randomContents[i % randomContents.length], pos);
                }, i * 200);
            }

            // å¯åŠ¨å¿«é€Ÿè‡ªåŠ¨ç”Ÿæˆå¼¹çª—
            startFastAutoWindows();
        };

        // æ‰‹åŠ¨æ·»åŠ å¼¹çª—æŒ‰é’®
        addWindowBtn.addEventListener('click', () => {
            customizeModal.style.display = 'block';
            overlay.style.display = 'block';
        });

        cancelBtn.addEventListener('click', () => {
            customizeModal.style.display = 'none';
            overlay.style.display = 'none';
            windowTitleInput.value = '';
            windowContentInput.value = '';
        });

        confirmBtn.addEventListener('click', () => {
            const title = windowTitleInput.value.trim() || randomTitles[Math.floor(Math.random()*randomTitles.length)];
            const content = `äº²çˆ±çš„å°æ±ª~ ${windowContentInput.value.trim()}`;
            if (!windowContentInput.value.trim()) return;
            const pos = getRandomPosition();
            createWindow(title, content, pos);
            customizeModal.style.display = 'none';
            overlay.style.display = 'none';
            windowTitleInput.value = '';
            windowContentInput.value = '';
        });

        // åˆ›å»ºæ™®é€šå¼¹çª—ï¼ˆä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼‰
        function createWindow(title, content, position) {
            const windowEl = document.createElement('div');
            windowEl.className = 'window';
            const pos = position || getRandomPosition();
            windowEl.style.left = `${pos.left}px`;
            windowEl.style.top = `${pos.top}px`;
            const hue = Math.floor(Math.random() * 360);
            windowEl.style.background = `hsl(${hue}, 70%, 95%)`;

            windowEl.innerHTML = `
                <div class="window-header">
                    <div class="window-title">${title}</div>
                    <div class="window-close">Ã—</div>
                </div>
                <div class="window-content">${content}</div>
            `;

            document.body.appendChild(windowEl);
            windows.push(windowEl);

            windowEl.querySelector('.window-close').addEventListener('click', function() {
                windowEl.style.transition = 'all 0.3s ease';
                windowEl.style.transform = 'scale(0)';
                windowEl.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(windowEl)) {
                        windowEl.remove();
                        const index = windows.indexOf(windowEl);
                        if (index > -1) windows.splice(index, 1);
                    }
                }, 300);
            });

            windowEl.querySelector('.window-header').addEventListener('mousedown', function(e) {
                currentDraggingWindow = windowEl;
                offsetX = e.clientX - windowEl.offsetLeft;
                offsetY = e.clientY - windowEl.offsetTop;
                e.preventDefault();
            });

            // è‡ªåŠ¨æ¶ˆå¤±
            const disappearTime = Math.random() * 1000 + 1000;
            setTimeout(() => {
                if (document.body.contains(windowEl)) {
                    windowEl.style.transition = 'all 0.5s ease';
                    windowEl.style.transform = 'scale(0.8)';
                    windowEl.style.opacity = '0';
                    setTimeout(() => {
                        if (document.body.contains(windowEl)) {
                            windowEl.remove();
                            const index = windows.indexOf(windowEl);
                            if (index > -1) windows.splice(index, 1);
                        }
                    }, 500);
                }
            }, disappearTime);
        }

        // æ‹–æ‹½äº‹ä»¶
        document.addEventListener('mousemove', function(e) {
            if (currentDraggingWindow) {
                const maxX = window.innerWidth - currentDraggingWindow.offsetWidth;
                const maxY = window.innerHeight - currentDraggingWindow.offsetHeight;
                let newLeft = e.clientX - offsetX;
                let newTop = e.clientY - offsetY;
                newLeft = Math.max(0, Math.min(newLeft, maxX));
                newTop = Math.max(0, Math.min(newTop, maxY));
                currentDraggingWindow.style.left = `${newLeft}px`;
                currentDraggingWindow.style.top = `${newTop}px`;
            }
        });

        document.addEventListener('mouseup', function() {
            currentDraggingWindow = null;
        });

        // å¿«é€Ÿè‡ªåŠ¨ç”Ÿæˆå¼¹çª—
        function startFastAutoWindows() {
            function generateBatch() {
                const count = Math.floor(Math.random() * 3) + 3;
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        const randomTitle = randomTitles[Math.floor(Math.random() * randomTitles.length)];
                        const randomContent = randomContents[Math.floor(Math.random() * randomContents.length)];
                        createWindow(randomTitle, randomContent);
                    }, i * 100);
                }
                const nextDelay = Math.random() * 700 + 800;
                setTimeout(generateBatch, nextDelay);
            }
            generateBatch();
        }
    </script>
</body>
</html>



